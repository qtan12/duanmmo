<!-- Filter Bar -->
<div class="mb-6">
    <!-- Mobile Filter Toggle -->
    <div class="md:hidden mb-2">
        <button @click="filterOpen = !filterOpen"
            class="w-full flex items-center justify-between p-4 bg-white rounded-lg shadow-sm border">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center">
                    <i data-lucide="filter" class="w-4 h-4 text-white"></i>
                </div>
                <div class="text-left">
                    <h3 class="font-semibold text-gray-900">Bộ lọc sản phẩm</h3>
                    <p class="text-sm text-gray-500"
                        x-text="getFilterCount() > 0 ? `${getFilterCount()} tiêu chí đã chọn` : 'Tìm kiếm sản phẩm phù hợp'">
                    </p>
                </div>
            </div>
            <i data-lucide="chevron-down" class="w-5 h-5 text-gray-400 transition-transform duration-200"
                :class="filterOpen ? 'rotate-180' : ''"></i>
        </button>
    </div>

    <!-- Desktop Filter -->
    <div class="hidden md:block p-6 card">
        <!-- Header -->
        <div class="flex items-center justify-between mb-6">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-emerald-500 rounded-lg flex items-center justify-center">
                    <i data-lucide="filter" class="w-5 h-5 text-white"></i>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-gray-900">Bộ lọc sản phẩm</h3>
                    <p class="text-sm text-gray-500">Tìm kiếm sản phẩm phù hợp</p>
                </div>
            </div>
            <div class="text-sm text-gray-500">
                <!-- khi chưa lọc không hiển thị chữ Bộ lọc: -->
                <span x-show="getFilterCount() > 0">Bộ lọc:</span>

                <span x-show="getFilterCount() > 0" class="text-emerald-600">
                    đã lọc <span x-text="getFilterCount()"></span> tiêu chí
                </span>
            </div>
        </div>

        <!-- Filter Row -->
        <div class="grid grid-cols-5 gap-4">
            <!-- Category Filter -->
            <div>
                <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                    <i data-lucide="grid-3x3" class="w-4 h-4"></i>
                    Danh mục
                </label>
                <select x-model="selectedCategory" @change="applyFilters()" class="w-full input">
                    <option value="all">Tất cả danh mục</option>
                    <option value="backlink">Backlink</option>
                    <option value="email">Email</option>
                    <option value="facebook">Facebook</option>
                    <option value="social">Social</option>
                    <option value="tools">Tools</option>
                    <option value="license">License</option>
                    <option value="vpn">VPN</option>
                    <option value="course">Khóa học</option>
                </select>
            </div>

            <!-- Price Filter -->
            <div>
                <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                    <i data-lucide="dollar-sign" class="w-4 h-4"></i>
                    Khoảng giá
                </label>
                <select x-model="selectedPrice" @change="applyFilters()" class="w-full input">
                    <option value="">Tất cả giá</option>
                    <option value="0-100000">Dưới 100,000₫</option>
                    <option value="100000-500000">100,000₫ - 500,000₫</option>
                    <option value="500000-1000000">500,000₫ - 1,000,000₫</option>
                    <option value="1000000+">Trên 1,000,000₫</option>
                </select>
            </div>

            <!-- Rating Filter -->
            <div>
                <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                    <i data-lucide="star" class="w-4 h-4"></i>
                    Đánh giá
                </label>
                <select x-model="selectedRating" @change="applyFilters()" class="w-full input">
                    <option value="">Tất cả đánh giá</option>
                    <option value="5">5 sao</option>
                    <option value="4">4+ sao</option>
                    <option value="3">3+ sao</option>
                </select>
            </div>

            <!-- Sort Filter -->
            <div>
                <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                    <i data-lucide="arrow-up-down" class="w-4 h-4"></i>
                    Sắp xếp
                </label>
                <select x-model="selectedSort" @change="applyFilters()" class="w-full input">
                    <option value="popular">Phổ biến</option>
                    <option value="price-low">Giá thấp đến cao</option>
                    <option value="price-high">Giá cao đến thấp</option>
                    <option value="newest">Ngày mới nhất</option>
                    <option value="rating">Đánh giá tốt nhất</option>
                </select>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col gap-2">
                <button @click="applyFilters()"
                    class="flex items-center justify-center gap-2 px-4 py-2 btn btn-primary">
                    <i data-lucide="filter" class="w-4 h-4"></i>
                    Lọc
                </button>
                <button @click="resetFilters()"
                    class="flex items-center justify-center gap-2 px-4 py-2 btn btn-secondary">
                    <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                    Reset
                </button>
            </div>
        </div>
    </div>

    <!-- Mobile Filter Panel -->
    <div x-show="filterOpen" x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0 transform scale-95" x-transition:enter-end="opacity-100 transform scale-100"
        x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100 transform scale-100"
        x-transition:leave-end="opacity-0 transform scale-95"
        class="md:hidden p-4 bg-white rounded-lg shadow-sm border space-y-4">

        <!-- Category Filter -->
        <div>
            <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                <i data-lucide="grid-3x3" class="w-4 h-4"></i>
                Danh mục
            </label>
            <select x-model="selectedCategory" @change="applyFilters()" class="w-full input">
                <option value="all">Tất cả danh mục</option>
                <option value="backlink">Backlink</option>
                <option value="email">Email</option>
                <option value="facebook">Facebook</option>
                <option value="social">Social</option>
                <option value="tools">Tools</option>
                <option value="license">License</option>
                <option value="vpn">VPN</option>
                <option value="course">Khóa học</option>
            </select>
        </div>

        <!-- Price Filter -->
        <div>
            <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                <i data-lucide="dollar-sign" class="w-4 h-4"></i>
                Khoảng giá
            </label>
            <select x-model="selectedPrice" @change="applyFilters()" class="w-full input">
                <option value="">Tất cả giá</option>
                <option value="0-100000">Dưới 100,000₫</option>
                <option value="100000-500000">100,000₫ - 500,000₫</option>
                <option value="500000-1000000">500,000₫ - 1,000,000₫</option>
                <option value="1000000+">Trên 1,000,000₫</option>
            </select>
        </div>

        <!-- Rating Filter -->
        <div>
            <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                <i data-lucide="star" class="w-4 h-4"></i>
                Đánh giá
            </label>
            <select x-model="selectedRating" @change="applyFilters()" class="w-full input">
                <option value="">Tất cả đánh giá</option>
                <option value="5">5 sao</option>
                <option value="4">4+ sao</option>
                <option value="3">3+ sao</option>
            </select>
        </div>

        <!-- Sort Filter -->
        <div>
            <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                <i data-lucide="arrow-up-down" class="w-4 h-4"></i>
                Sắp xếp
            </label>
            <select x-model="selectedSort" @change="applyFilters()" class="w-full input">
                <option value="popular">Phổ biến</option>
                <option value="price-low">Giá thấp đến cao</option>
                <option value="price-high">Giá cao đến thấp</option>
                <option value="newest">Ngày mới nhất</option>
                <option value="rating">Đánh giá tốt nhất</option>
            </select>
        </div>

        <!-- Mobile Action Buttons -->
        <div class="flex gap-3 pt-2">
            <button @click="applyFilters(); filterOpen = false"
                class="flex-1 flex items-center justify-center gap-2 px-4 py-3 btn btn-primary">
                <i data-lucide="filter" class="w-4 h-4"></i>
                Áp dụng bộ lọc
            </button>
            <button @click="resetFilters()" class="flex items-center justify-center gap-2 px-4 py-3 btn btn-secondary">
                <i data-lucide="refresh-cw" class="w-4 h-4"></i>
            </button>
        </div>
    </div>
</div>